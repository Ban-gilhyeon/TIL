`sudo` (Superuser Do의 줄임말)
- 일반 사용자가 관리자(root) 권한으로 명령을 실핼할 수 있게 해주는 명령어
- `sudo`명령어를 사용할 수 있는 사용자는 `/etc/sudoers`파일에 등록 되어 있음

`su`(Substitute User, Switch User)
- 현재 사용자를 다른 사용자 (보통 root)로 전환하는 명령어
- `su [사용자명]`
 ![[Pasted image 20250909012836.png]]
 
# 파일 시스템 관련 명령어

리눅스에서 파일 시스템을 인식하는 과정
1. 하드디스크 추가 및 연결
	1. 새로 `HDD`또는 `SDD` 를 추가할 때 128GB 하드를 컴퓨터 혹은 본체에 연결
2. 하드디스크 인식
	1. `fdisk -l` 명령으로 인식 역부 확인
	2. 장치에 대한 파일명 확인
3. 파티션 생성 or 분할
	1. `fdisk` 명령으로 파티션 생성 or 분할 가능
	2. 너무 많은 파티션은 관리하기 힘듬
4. 파일 시스템 생성
	1. 원하는 파일 시스템을 `mkfs` 명령어를 사용하여 만들기
5. 디렉터리 생성
	1. `mkdir`명령어로 하드가 사용할 디렉터리 생성
6. 마운트 및 설정 등록
	1. 마운트 : 파일 시스템이 생성된 파티션을 위해서 만들어준 디렉터리로 연결하는 것
	2. `mount`명령으로 사용
	3. 마운트 후 정상적으로 사용이 가능하나 재부팅하면 다시 마운트를 해줘야 하기 때문에 `/etc/fstab`에 해당 내용을 등록해 계속 사용 가능하도록 해야 함

## 권한 및 그룹 설정
### `ls `명령어
- 파일이나 디렉터리에 부여된 허가권, 소유권 등 권한 확인
>>root@32b353e84749:/tmp/test# ls -l
>> total 4
>> -rw-r--r-- 1 root root 43 Aug 29 23:00 test.txt

\[파일 권한] \[연결된 파일 갯수] \[소유자명]\[소유 그룹명]\[파일 크기(바이트)] \[마지막 변경 시각] \[파일명]

- 권한 알파벳의 의미
![[Pasted image 20250909011605.png]]

![[Pasted image 20250909011121.png]]
```
1 2 3 4 5 6 7 8 9 10
- r w - r - - r - - 
```
1 : 파일 타입 (`-` 일반파일, `d` 디렉터리)
2-4 : 사용자(owner)의 권한 (rw-)
5-7 : 그룹의 권한 (r--)
8-10 : 그외의 권한 (r--)

- r  : 읽기 4
- w : 쓰기 2
- x : 실행(excute) 1
### chown
- 파일과 디렉터리의 사용자 소유권과 그룹 소유권 변경
- `chown [옵션] 소유자[:그룹명] 파일명`
- 예시 : `chown user1 file.txt`
옵션 
-R : 재귀적으로 변경 -> 디렉터리일 경우 하위 모든 파일/디렉터리까지 소유권 변경
-v : 자세히 출력(Vervose) -> 변경된 내용을 하나하나 출력
-c : 변경된 항목만 출력 -> 변경된 파일만 보여줌
--reference=다른파일 : 저장한 다른 파일의 소유자/그룹을 복사
--help : 사용법 표시
예시 
```
sudo chown user1 file.txt
# file.txt의 소유자를 user1으로 변경

sudo chown user1:group1 file.txt
# file.txt의 소유자와 그룹을 모두 변경

sudo chown -R user1 /home/user1/project
# /home/user1/project 디렉토리와 그 안의 모든 파일/디렉토리 소유자 변경

sudo chown --reference=other.txt target.txt
# other.txt의 소유자/그룹을 target.txt에 복사

sudo chown -v user1:group1 file.txt
# 실행 결과를 자세히 출력
```
주의할점
- `chown`은 일반 사용자는 자신의 파일의 소유자를 바꿀 수 없움, 반드시 `sudo`나 `root` 권한이 필요함
- 잘못 바꾸면 시스템 파일이 손상될 수 있음

### chgrp(change group)
- 파일이나 디렉터리의 그룹 소유권 변경
- `chgrp [옵션] [그룹명] [파일명]`
옵션
-R : 디렉터리 안의 모든 하위 항목까지 재귀적으로 그룹 변경
-v : 처리한 파일 하나하나 출력
-c : 실제로 변경된 항목만 출력
-reference=다른파일 : 다른 파일의 그룹과 동일하게 설정

예시
```
chgrp staff myfile.txt
# myfile.txt의 그룹을 staff로 변경

sudo chgrp -R dev_team /home/project
# /home/project 및 내부 모든 파일의 그룹을 dev_team으로 변경

chgrp --reference=config.txt settings.txt
# config.txt의 그룹과 같은 그룹으로 settings.txt의 그룹을 설정
```

### chmod(change mode)
- 파일이나 디렉터리의 권한(읽기, 쓰기, 실행)을 설정하는 명령어
- `chmod [옵션] [권한] 대상파일`

권한 숫자
- r  : 읽기 4
- w : 쓰기 2
- x : 실행(excute) 1
- 7 : rwx 
- 6 : rw-
- 5 : r-w
- 4 : r-
- 0 : --

1. 사용법 숫자
`chmod 755 file.txt` 

755 : `rwx r-x r-x` 
- 소유자 : rwx
- 그룹 : r-x
- 기타 : r-x

2. 사용법 기호
권한 기호
- u : 사용자(owner)
- g : 그룹(group)
- o : 그외(other)
- a : 모두(all)
- + : 권한 추가
- - : 권한 제거
- = : 정확히 설정

`chmod u+x file.txt` : 사용자에게 실행 권한 추가
`chmod go-w file.txt` : 그룹과 기타에게 쓰기 권한 제거
`chmod a=r file.txt` : 모두에게 읽기 권한 허용

### umask(user file creation mode mask)
- 새로 파일이나 디렉토리를 만들 때 기본으로 설정되는 권한 제한(mask)하는 값
-> 최대 권한에서 제한할 권한을 뺀 값이 실제 권한이 되는 방식

기본 원리
- 파일의 최대 권한 : 666 (rw-rw-rw-)
- 디렉토리의 최대 권한 : 777 (rwxrwxrwx)
- 실제 생성 권한 = 최대 권한 - umask값

예시
umask가 002 일 때
- 파일 : 666 - 002 = 664 (rw-rw-r--)
- 디렉토리 : 777 - 002 = 775(rwxrwxr-x)
umssk가 022 일 때
- 파일 : 666 - 022 = 644 (rw-r--r--)
- 디렉토리 : 777 - 022 = 755 (rwx-r-xr-x)

옵션
-S : 심볼릭(symbolic) 형식으로 권한 마스크를 출력
>>root@32b353e84749:/tmp/test# umask -S
>> u=rwx,g=rx,o=rx

### setUID (set user ID) / setGID(set user group ID) / SticyBiy
1. setUID (set user ID)
파일을 실행하는 사용자가 그 파일의 소유자 권한으로 실행되게 하는 기능
- 시스템 명령 중 일반 사용자가 실행하되 root 권한이 필요한 경우
> ls -l /user/bin/passwor
> -rwsr-xr-x 1 root root ...

2. setGID(set user group ID)
디렉토리나 파일에 적용되며, 실행 또는 생성 시 그룹 권한을 상속받게 하는 기능

- setGID on file 
	- 파일을 실행할 때 해당 파일의 그룹 권한으로 실행됨
- setGID on directory
	- 디렉토리에 적용하면 그 안에서 생성되는 모든 파일/디렉토리는 해당 디렉토리의 그룹을 상송 받음

3. Sticky Bit
디렉토리에서 사용자가 자신이 생성한 파일만 삭제할 수 있도록 제한하는 기능
- `/tmp` 같이 여러 사용자가 파일을 생성하는 공유 디렉토리에 사용



